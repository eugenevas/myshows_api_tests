
<h1 align="center">Описание проекта</h1>


<br> My Shows - это копия одноименного сервиса https://myshows.me/

Можно вести список сериалов, которые смотришь сейчас или когда-то смотрел.
Этот проект представляет из себя сервис для ведения рейтинга сериалов. Он состоит из микросервиса, nginx и базы Postgres, всё это связано с помощью docker compose и может быть одной командой развёрнуто локально.




# Архитектура проекта
<br> База данных PostgreSQL
<br>Бэкенд написан на Python
<br>REST API
<br>Веб-сервер Nginx


# Что нужно сделать, чтобы проект запустить локально
<br>1. Установить Docker
<br>2. Поднять проект локально из Docker образа
<br>3. Подключиться к базе данных


# Описание классов, методов и фикстур
config:
  -api_config.py - эндпоинты.
  -bd_config.py - здесь происходит коннект к БД.
data:
  -delete_series.sql - удаляет сериал через SQL скрипт.
  -insert_series.sql - добаляет сериал через SQL скрипт.
  -series_for_testing.py - массив сериалов для добавления.

class TestGetEndpoint - метод test_write_series_in_bd_get_episode() проверяет приходят ли добавленные сериалы.
Сериалы добавляются с помощью psycopg, 

# Тесты в проекте
<br>**Метод GET**
<br>1. Фикстура add_test_series подключается к БД напрямую через psycopg, очищает таблицу series, добавляет три записи с нужными статусами (переведёнными в базовое значение).
<br>2. После теста таблица очищается.
<br>3. Тест test_get_series делает запрос к API, получает JSON-список, сравнивает полученные сериалы с теми, что были добавлены.
<br>4. Важный момент — статус в API и в базе различается, поэтому при добавлении и проверке применяется словарь API_SERIES_STATUS_TO_DB_MAPPING.
<br>5. Предполагается, что API возвращает статус в формате API (т.е. на русском, как в expected_series).
<br>**Метод PUT**
<br>6. Для каждого поля в FIELDS_TO_TEST делается отдельный тест.
<br>7. В тесте отправляется PUT-запрос с обновлённым полем.
<br>8. После запроса происходит проверка значения в базе.
<br>9. В фикстуре создаётся сериал, после теста — удаляется.
